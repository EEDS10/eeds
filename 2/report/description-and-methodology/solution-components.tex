The solution consists of three separate components. This section describes each of the three.

\subsection{Main Program}

The main program is the C program which runs on the STK1000.
It interfaces with the hardware, and administers the user interface and main program logic.

\subsection{Sound Effect Synthesizer}

The synthesizer is responsible for generating the sound effects real-time as they are played.
It generates sounds by producing waveforms as described in the sound effects section, and modifies the amplitude of the signals according to a ADSR envelope.

\subsection{Libmodam - MOD Parser and Player Library}

Libmodam is the name of the MOD file parser and player written for this assignment.
It is written as a portable, cross-platform C library.
It has been tested on avr32 and on x86.

Libmodam is statically linked in the main solution program.

Libmodam includes a python utility script for platforms without filesystems.
Normally, to use libmodam, a programmer must read a MOD file to a byte buffer, and pass the buffer to libmodam, as it is done in the sample usage program test.c.
This is sadly impossible in environments without a file system.
The python script solves this by reading arbitrary files and converting them to C-code declaring large static const char* arrays representing those files.
For most platforms, this means that the files will be bundled with the executable in the .text section, making them read only.

By the programmer using libmodam, two main functions must be called repeatedly to generate output.
One of these functions is \texttt{MOD\_Player\_play(...)}.
This function returns a single sample of output, and must be called \texttt{sample rate} times per second for real time playback.
The other function is \texttt{MOD\_Player\_step(...)}, and advances logical state, such as which notes should be playing and what effect should be applied.
This function should be called no less that 50 times per second for real time playback.

These two driving functions are split up like this to minimize and keep constant the time spent generating the next output sample, to make libmodam more real-time-friendly.

Libmodam implements support for \texttt{M.K.} type MODs.
A subset of the playback effects from \texttt{M.K.} have been implemented.
Which effects to implement was chosen so that the most popular and often used effects were prioritized.
A list of the effects in \texttt{M.K.}, and their implementation status in libmodam can be found in table \ref{tbl-libmodam-feats}.

\begin{table}[H]
	\centering
    \caption{A list of the effects in \texttt{M.K.} and whether or not they have been implemented in libmodam.}
    \begin{tabular}{|l|l|}
        \hline
        Effect & Implemented? \\
        \hline
        \hline
        Arpeggio & implemented \\
        \hline
        Slide up & implemented \\
        \hline
        Slide down & implemented \\
        \hline
        Slide to note & implemented \\
        \hline
        Vibrato & not implemented* \\
        \hline
        Continue slide to note and volume slide & implemented \\
        \hline
        Tremolo & not implemented \\
        \hline
        Unused & implemented \\
        \hline
        Set sample offset & not implemented \\
        \hline
        Volume slide & implemented \\
        \hline
        Position jump & implemented \\
        \hline
        Set volume & implemented \\
        \hline
        Pattern break & implemented \\
        \hline
        Set filter on/off & not implemented \\
        \hline
        Fineslide up & not implemented \\
        \hline
        Fineslide down & not implemented \\
        \hline
        Set glissando on/off & not implemented \\
        \hline
        Set vibrato waveform & not implemented \\
        \hline
        Set finetune value & not implemented \\
        \hline
        Loop pattern & implemented \\
        \hline
        Set tremolo waveform & not implemented \\
        \hline
        Extended unused & implemented \\
        \hline
        Retrigger sample & not implemented \\
        \hline
        Fine volume slide up & implemented \\
        \hline
        Fine volume slide down & implemented \\
        \hline
        Cut sample & implemented \\
        \hline
        Delay sample & not implemented \\
        \hline
        Delay pattern & not implemented \\
        \hline
        Invert loop & not implemented \\
        \hline
        Set speed & implemented
    \end{tabular}
    \caption{A list of MOD effects and their implementation status in libmodam.}
    \label{tbl-libmodam-feats}
\end{table}
*was implemented at one point, but was later removed for performance reasons


For more details about what these effects do, refer to the list below.
\begin{itemize}
    \item{\url{http://www.mediatel.lu/workshop/audio/fileformat/h_mod.html}}
    \item{\url{http://archive.cs.uu.nl/pub/MIDI/DOC/MOD-info}}
    \item{\url{https://bel.fi/alankila/modguide/}}
    \item{\url{http://16-bits.org/mod/}}
\end{itemize}

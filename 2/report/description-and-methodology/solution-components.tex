The solution consists of three separate components. This section describes each of the three.

\subsection{main program}

The main program is the C program which runs on the STK1000.
It interfaces with the hardware, and administers the user interface and main program logic.

\subsection{synth}

\subsection{libmodam}

Libmodam is the name of the MOD file parser and player written for this assignment.
It is written as a portable, cross-platform C library.
It has been tested on avr32 and on x86.

Libmodam is statically linked in the main solution program.

Libmodam includes a python utility script for platforms without filesystems.
Normally, to use libmodam, a programmer must read a MOD file to to a byte buffer, and pass the buffer to libmodam, as it is done in the sample usage program test.c.
This is sadly impossible in environments without a file system.
The python script solves this by reading arbitrary files and converting them to C-code declaring large static const char* arrays representing those files.
For most platforms, this means that the files will be bundled with the executable in the .text section, making them read only.

By the programmer using libmodam, two main functions must be called repeatedly to generate output.
One of these functions is \texttt{MOD\_Player\_play(...)}.
This function returns a single sample of output, and must be called \texttt{sample rate} times per second for real time playback.
The other function is \texttt{MOD\_Player\_step(...)}, and advances logical state, such as which notes should be playing and what effect should be applied.
This function should be called no less that 50 times per second for real time playback.

These two driving functions are split up like this to minimize and constantivize (holde konstant; ikke variabel) the time spent generating the next output sample, to make libmodam more real-time-friendly.

Libmodam implements support for \texttt{M.K.} type MODs.
A subset of the playback effects from \texttt{M.K.} have been implemented.
Which effects to implement was chosen so that the most popular and often used effects were prioritized.
A list of the effects in \texttt{M.K.}, and their implementation status in libmodam can be found in table XXX.

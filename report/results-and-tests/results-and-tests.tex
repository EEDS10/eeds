
\section{Energy Efficiency}

The STK1000 offers 5 power pin pairs that may be used to measure current consumption of the STK1002 sister board, and therefore also energy efficiency.
These 5 pins are situated on the daughterboard, see figure \ref{power-pins-location}.
Current flow through the pins was measured by connecting an ammeter in series.
Current flow was measured for all five pin pairs on two different versions of the program: the final optimized interrupt-based program, and an earlier busy-wait based program without button cool-down timers.
For both programs current flow was measured twice: once with the program in an idle state, and once where the paddle was moved about by a user frantically pressing \texttt{SW0} and \texttt{SW2} as fast as possible.
The ampere meter used was a BST BS1901W, with a reported accuracy of ±(1.2\% +3d)\cite{BSTBS1901Wmanual}.


The measurements can be found in table \ref{energy-measurements-table}.


\begin{table}
        \begin{tabular}{|l|c|c|c|c|}
                \hline
                              & Interrupt-based &        & Busy-wait-based &        \\
                Pins          & idle            & active & idle            & active \\
                \hline
                \hline
                AVDDUSB (1,2) & 1.77mA          & 1.77mA & 1.77mA          & 1.77mA \\
                \hline
                AVDDPLL (3,4) & 1.97mA          & 1.97mA & 1.97mA          & 1.97mA \\
                \hline
                AVDDOSC (5,6) & 0.00mA          & 0.00mA & 0.00mA          & 0.00mA \\
                \hline
                VDDCORE (7,8) & 30.6mA          & 30.5mA & 26.0mA          & 25.8mA \\
                \hline
                VDDIO (9,10)  & 4.90mA          & 4.99mA & 8.05mA          & 8.13mA \\
                \hline
        \end{tabular}
    \caption{Results of the current consumption measurements of the STK1002}
    \label{energy-measurements-table}
\end{table}

\begin{figure}
\includegraphics[width = \textwidth]{results-and-tests/power-pins-location.jpg}
\caption{Location of the power pins on the STK1002. Image courtesy of ATMEL.}
\label{power-pins-location}
\end{figure}

VDDCORE (core power supply) and VDDIO (I/O power supply) are the interesting measurements, as AVDDUSB (usb power supply), AVDDPLL (PLL power supply) and AVDDOSC (Oscillator power supply) are not actively affected in the assignment.

Using the sum of the power consumption over VDDCORE and VDDIO during the idle state as an indicator of the total power consumption of the AP7000, we can evaluate the relative energy efficiency performance of the two programs' use of the AP7000.

The power consumption of VDDCORE and VDDIO of the interrupt-based version is 
$
30.6mA \cdot 1.8V +
4.90mA \cdot 3.3V
=
71.3mW
$
.

The power consumption of the busy-wait version is 
$
25.8mA \cdot 1.8V +
8.05mA \cdot 3.3V
=
73mW
$
.


The difference in power consumption is around 2\%, which is near-negligible.

\section{Testing}

	\input{results-and-tests/testing.tex}

\section{Discussion}
    
	\input{results-and-tests/discussion.tex}
